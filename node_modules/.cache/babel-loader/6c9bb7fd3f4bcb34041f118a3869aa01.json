{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _omit2 = _interopRequireDefault(require(\"lodash/omit\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _domLib = require(\"dom-lib\");\n\nvar _positionUtils = _interopRequireDefault(require(\"./positionUtils\"));\n\nvar _shallowEqual = _interopRequireDefault(require(\"../utils/shallowEqual\"));\n\nvar _getDOMNode = _interopRequireDefault(require(\"../utils/getDOMNode\"));\n\nvar Position = /*#__PURE__*/function (_React$Component) {\n  (0, _inheritsLoose2.default)(Position, _React$Component);\n\n  function Position(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.utils = null;\n    _this.lastTarget = false;\n    _this.needsFlush = null;\n    _this.container = null;\n    _this.containerScrollListener = null;\n    _this.childRef = void 0;\n\n    _this.updatePosition = function (placementChanged) {\n      if (placementChanged === void 0) {\n        placementChanged = true;\n      }\n\n      var target = _this.getTargetSafe();\n\n      var shouldUpdatePosition = _this.props.shouldUpdatePosition;\n      /**\n       * 如果 target 没有变化，同时不允许更新位置，placement 位置也没有改变，则返回\n       */\n\n      if (target === _this.lastTarget && !shouldUpdatePosition && !placementChanged) {\n        return;\n      }\n\n      _this.lastTarget = target;\n\n      if (!target) {\n        _this.setState({\n          positionLeft: 0,\n          positionTop: 0,\n          arrowOffsetLeft: null,\n          arrowOffsetTop: null\n        });\n\n        return;\n      }\n\n      var overlay = (0, _getDOMNode.default)((0, _assertThisInitialized2.default)(_this));\n      var container = (0, _domLib.getContainer)(_this.props.container, (0, _domLib.ownerDocument)((0, _assertThisInitialized2.default)(_this)).body);\n\n      var nextPosition = _this.utils.calcOverlayPosition(overlay, target, container);\n\n      _this.container = container;\n\n      _this.setState(nextPosition);\n    };\n\n    _this.state = {\n      positionLeft: 0,\n      positionTop: 0,\n      arrowOffsetLeft: null,\n      arrowOffsetTop: null\n    };\n    _this.utils = (0, _positionUtils.default)({\n      placement: props.placement,\n      preventOverflow: props.preventOverflow,\n      padding: props.containerPadding\n    });\n    _this.childRef = React.createRef();\n    return _this;\n  }\n\n  var _proto = Position.prototype;\n\n  _proto.getHTMLElement = function getHTMLElement() {\n    /**\n     * findDOMNode is deprecated in StrictMode.\n     * Replace findDOMNode with ref. Provided for `Transition` calls.\n     * https://fb.me/react-strict-mode-find-node\n     */\n    return (0, _getDOMNode.default)(this.childRef.current);\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.updatePosition(false);\n\n    if (this.container && this.props.preventOverflow) {\n      this.containerScrollListener = (0, _domLib.on)(this.container.tagName === 'BODY' ? window : this.container, 'scroll', this.updatePosition);\n    }\n  };\n\n  _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    if (!(0, _shallowEqual.default)(nextProps, this.props)) {\n      this.needsFlush = true;\n      return true;\n    }\n\n    if (!(0, _shallowEqual.default)(nextState, this.state)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this.needsFlush) {\n      this.needsFlush = false;\n      this.updatePosition(prevProps.placement !== this.props.placement);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var _this$containerScroll;\n\n    this.lastTarget = null;\n    (_this$containerScroll = this.containerScrollListener) === null || _this$containerScroll === void 0 ? void 0 : _this$containerScroll.off();\n  };\n\n  _proto.getTargetSafe = function getTargetSafe() {\n    var target = this.props.target;\n\n    if (!target) {\n      return null;\n    }\n\n    var targetSafe = target(this.props);\n\n    if (!targetSafe) {\n      return null;\n    }\n\n    return targetSafe;\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        children = _this$props.children,\n        className = _this$props.className,\n        rest = (0, _objectWithoutPropertiesLoose2.default)(_this$props, [\"children\", \"className\"]);\n    var _this$state = this.state,\n        positionLeft = _this$state.positionLeft,\n        positionTop = _this$state.positionTop,\n        positionClassName = _this$state.positionClassName,\n        arrowPosition = (0, _objectWithoutPropertiesLoose2.default)(_this$state, [\"positionLeft\", \"positionTop\", \"positionClassName\"]);\n\n    if (typeof children === 'function') {\n      return children({\n        className: (0, _classnames.default)(className, positionClassName),\n        left: positionLeft,\n        top: positionTop\n      }, this.childRef);\n    }\n\n    var child = React.Children.only(children);\n    return React.cloneElement(child, (0, _extends2.default)({}, (0, _omit2.default)(rest, ['target', 'container', 'containerPadding', 'preventOverflow']), {}, arrowPosition, {\n      positionLeft: positionLeft,\n      positionTop: positionTop,\n      className: (0, _classnames.default)(className, positionClassName, child.props.className),\n      htmlElementRef: this.childRef,\n      style: (0, _extends2.default)({}, child.props.style, {\n        left: positionLeft,\n        top: positionTop\n      })\n    }));\n  };\n\n  return Position;\n}(React.Component);\n\nPosition.displayName = 'Position';\nPosition.defaultProps = {\n  containerPadding: 0,\n  placement: 'right',\n  shouldUpdatePosition: false\n};\nvar _default = Position;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["E:/Hammad/FrontEnd/ClientApp/node_modules/rsuite/lib/Overlay/Position.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","exports","__esModule","default","_extends2","_objectWithoutPropertiesLoose2","_assertThisInitialized2","_inheritsLoose2","_omit2","React","_classnames","_domLib","_positionUtils","_shallowEqual","_getDOMNode","Position","_React$Component","props","_this","call","utils","lastTarget","needsFlush","container","containerScrollListener","childRef","updatePosition","placementChanged","target","getTargetSafe","shouldUpdatePosition","setState","positionLeft","positionTop","arrowOffsetLeft","arrowOffsetTop","overlay","getContainer","ownerDocument","body","nextPosition","calcOverlayPosition","state","placement","preventOverflow","padding","containerPadding","createRef","_proto","prototype","getHTMLElement","current","componentDidMount","on","tagName","window","shouldComponentUpdate","nextProps","nextState","componentDidUpdate","prevProps","componentWillUnmount","_this$containerScroll","off","targetSafe","render","_this$props","children","className","rest","_this$state","positionClassName","arrowPosition","left","top","child","Children","only","cloneElement","htmlElementRef","style","Component","displayName","defaultProps","_default","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _omit2 = _interopRequireDefault(require(\"lodash/omit\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar _domLib = require(\"dom-lib\");\n\nvar _positionUtils = _interopRequireDefault(require(\"./positionUtils\"));\n\nvar _shallowEqual = _interopRequireDefault(require(\"../utils/shallowEqual\"));\n\nvar _getDOMNode = _interopRequireDefault(require(\"../utils/getDOMNode\"));\n\nvar Position =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(Position, _React$Component);\n\n  function Position(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.utils = null;\n    _this.lastTarget = false;\n    _this.needsFlush = null;\n    _this.container = null;\n    _this.containerScrollListener = null;\n    _this.childRef = void 0;\n\n    _this.updatePosition = function (placementChanged) {\n      if (placementChanged === void 0) {\n        placementChanged = true;\n      }\n\n      var target = _this.getTargetSafe();\n\n      var shouldUpdatePosition = _this.props.shouldUpdatePosition;\n      /**\n       * 如果 target 没有变化，同时不允许更新位置，placement 位置也没有改变，则返回\n       */\n\n      if (target === _this.lastTarget && !shouldUpdatePosition && !placementChanged) {\n        return;\n      }\n\n      _this.lastTarget = target;\n\n      if (!target) {\n        _this.setState({\n          positionLeft: 0,\n          positionTop: 0,\n          arrowOffsetLeft: null,\n          arrowOffsetTop: null\n        });\n\n        return;\n      }\n\n      var overlay = (0, _getDOMNode.default)((0, _assertThisInitialized2.default)(_this));\n      var container = (0, _domLib.getContainer)(_this.props.container, (0, _domLib.ownerDocument)((0, _assertThisInitialized2.default)(_this)).body);\n\n      var nextPosition = _this.utils.calcOverlayPosition(overlay, target, container);\n\n      _this.container = container;\n\n      _this.setState(nextPosition);\n    };\n\n    _this.state = {\n      positionLeft: 0,\n      positionTop: 0,\n      arrowOffsetLeft: null,\n      arrowOffsetTop: null\n    };\n    _this.utils = (0, _positionUtils.default)({\n      placement: props.placement,\n      preventOverflow: props.preventOverflow,\n      padding: props.containerPadding\n    });\n    _this.childRef = React.createRef();\n    return _this;\n  }\n\n  var _proto = Position.prototype;\n\n  _proto.getHTMLElement = function getHTMLElement() {\n    /**\n     * findDOMNode is deprecated in StrictMode.\n     * Replace findDOMNode with ref. Provided for `Transition` calls.\n     * https://fb.me/react-strict-mode-find-node\n     */\n    return (0, _getDOMNode.default)(this.childRef.current);\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.updatePosition(false);\n\n    if (this.container && this.props.preventOverflow) {\n      this.containerScrollListener = (0, _domLib.on)(this.container.tagName === 'BODY' ? window : this.container, 'scroll', this.updatePosition);\n    }\n  };\n\n  _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    if (!(0, _shallowEqual.default)(nextProps, this.props)) {\n      this.needsFlush = true;\n      return true;\n    }\n\n    if (!(0, _shallowEqual.default)(nextState, this.state)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this.needsFlush) {\n      this.needsFlush = false;\n      this.updatePosition(prevProps.placement !== this.props.placement);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var _this$containerScroll;\n\n    this.lastTarget = null;\n    (_this$containerScroll = this.containerScrollListener) === null || _this$containerScroll === void 0 ? void 0 : _this$containerScroll.off();\n  };\n\n  _proto.getTargetSafe = function getTargetSafe() {\n    var target = this.props.target;\n\n    if (!target) {\n      return null;\n    }\n\n    var targetSafe = target(this.props);\n\n    if (!targetSafe) {\n      return null;\n    }\n\n    return targetSafe;\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        children = _this$props.children,\n        className = _this$props.className,\n        rest = (0, _objectWithoutPropertiesLoose2.default)(_this$props, [\"children\", \"className\"]);\n    var _this$state = this.state,\n        positionLeft = _this$state.positionLeft,\n        positionTop = _this$state.positionTop,\n        positionClassName = _this$state.positionClassName,\n        arrowPosition = (0, _objectWithoutPropertiesLoose2.default)(_this$state, [\"positionLeft\", \"positionTop\", \"positionClassName\"]);\n\n    if (typeof children === 'function') {\n      return children({\n        className: (0, _classnames.default)(className, positionClassName),\n        left: positionLeft,\n        top: positionTop\n      }, this.childRef);\n    }\n\n    var child = React.Children.only(children);\n    return React.cloneElement(child, (0, _extends2.default)({}, (0, _omit2.default)(rest, ['target', 'container', 'containerPadding', 'preventOverflow']), {}, arrowPosition, {\n      positionLeft: positionLeft,\n      positionTop: positionTop,\n      className: (0, _classnames.default)(className, positionClassName, child.props.className),\n      htmlElementRef: this.childRef,\n      style: (0, _extends2.default)({}, child.props.style, {\n        left: positionLeft,\n        top: positionTop\n      })\n    }));\n  };\n\n  return Position;\n}(React.Component);\n\nPosition.displayName = 'Position';\nPosition.defaultProps = {\n  containerPadding: 0,\n  placement: 'right',\n  shouldUpdatePosition: false\n};\nvar _default = Position;\nexports.default = _default;\nmodule.exports = exports.default;"]},"metadata":{},"sourceType":"script"}